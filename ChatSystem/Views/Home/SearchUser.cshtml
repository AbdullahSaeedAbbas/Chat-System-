@model IEnumerable<ChatSystem.Models.User>

@{
    ViewBag.Title = "ShowUser";
}

<link href="~/Content/SearchUser.css" rel="stylesheet" />
<html>
<head>
    <title>
        Search User8
    </title>
</head>
<body onload="ee()">
    @*search textbox*@
    @Html.Partial("_NavbarUser")
    <div class="Pic_User_block">
        @using (Html.BeginForm("SearchUser", "Home"))
        {
        <div class="UserStyle" style="background-color:transparent;">
            <table style="width:100%;">
                <tr>
                    <td class="elementUserStyle">
                        <input type="search" name="SearchUser" id="SearchUser" placeholder="Write Name Here" autocomplete="off" />
                    </td>
                    <td style="width:30%;">
                        <input type="submit" id="imag1" value="." class="btn_sreach_" style="outline:none;background-color:transparent;" />
                    </td>
                </tr>
            </table>
        </div>
        }

    </div>
    @*user block*@
    @if (Model.Count() != 0)
    {
        List<int> userlist = new List<int>();
        List<int> userlistRespond = new List<int>();
        List<int> FriendUser = new List<int>();
        FriendUser = ViewBag.FriendUser;
        userlist = ViewBag.RequestUser;
        userlistRespond = ViewBag.RespondUser;
        foreach (var item in Model)
        {
            if (item.UserId == ViewBag.OwnerAccount)
            { continue; }
            <div class="Pic_User_block">
                <div class="UserStyle">
                    @using (Html.BeginForm("ProceedRequestFriend", "Home"))
                    {
                        <table style="width:100%;">
                            <tr>
                                <td style="width:9%">
                                    <img src="data:image/jpg;base64,@Convert.ToBase64String(item.Logo)" width="73" height="50" style="border-radius:100%" />
                                </td>
                                <td style="width:40%">
                                    @item.FirstName <span> </span> @item.LastName
                                    <input type="hidden" value="@item.UserId" name="UserDemandID" />
                                    <input type="hidden" value="@ViewBag.LoginUser" name="UserRequestID" />
                                    <input type="hidden" value="" name="bool_value" />
                                    @*<input type="hidden" value="0" name="flag" id="flag" />*@
                                    <hr style="border:0px;margin-top:10px;margin-bottom:10px;" />
                                    <div style="font-size:15px;color:rgb(246, 164, 164);">
                                        @item.Description
                                    </div>
                                </td>
                                <td style="width:50%">
                                    @if (userlistRespond.Contains(item.UserId))
                                    {
                                        <input type="hidden" value="1" name="flag" id="flag" />
                                            <button type="submit"
                                                    id="MakeFriendBtn"
                                                    name="flag"
                                                    value="1"
                                                    style="float:right;"
                                                    onclick="change_val()">
                                                قبول
                                            </button>
                                            <button type="submit" id="SendMessegeBtn" name="flag" value="-1">
                                                رفض
                                            </button>
                                    }
                                    else if (userlist.Contains(item.UserId))
                                    {
                                        <button type="submit"
                                                id="MakeFriendBtn"
                                                name="DemandReqiust"
                                                style="float:right;"
                                                onclick="change_val();">
                                            تم ارسال
                                        </button>
                                            <button type="submit" id="SendMessegeBtn">
                                                مراسلة
                                            </button>
                                    }
                                    else if (FriendUser.Contains(item.UserId))
                                    {
                                        <button type="submit"
                                                id="MakeFriendBtn"
                                                name="DemandReqiust"
                                                style="float:right;"
                                                onclick="change_val();">
                                            الأصدقاء
                                        </button>
                                            <button type="submit" id="SendMessegeBtn">
                                                مراسلة
                                            </button>
                                    }
                                    else
                                    {
                                        <button type="submit"
                                                id="MakeFriendBtn"
                                                name="DemandReqiust"
                                                style="float:right;"
                                                onclick="change_val();">
                                            اضافة صديق
                                        </button>
                                            <button type="submit" id="SendMessegeBtn">
                                                مراسلة
                                            </button>
                                    }
                                </td>
                            </tr>
                        </table>
                    }
                </div>
            </div>
        }
    }
    else
    {
        <div style="text-align:center;font-size:25px;font-family:'Times New Roman';color:red;background-color:rgba(0,0,0,0.8);">
            There is NO User At The Same Name

        </div>

    }

    <script src="jquery-1.11.1.min.js"></script>
    <script src="~/Scripts/chatSystemJS.js">
        change_val()
        {
            if (document.getElementById('MakeFriendBtn').click == true) {
                document.getElementById('flag').textContent = 1;
            }
            else if (document.getElementById('SendMessegeBtn').click == true) {
                document.getElementById('flag').textContent = -1;
            }

        }

    </script>
</body>
</html>